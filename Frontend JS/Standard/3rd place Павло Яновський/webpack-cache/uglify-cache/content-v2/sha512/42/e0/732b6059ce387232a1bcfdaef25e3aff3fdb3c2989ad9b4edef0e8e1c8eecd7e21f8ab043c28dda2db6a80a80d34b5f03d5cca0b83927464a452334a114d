{"code":"!function(t){function e(e){for(var i,o,a=e[0],h=e[1],c=e[2],p=0,l=[];p<a.length;p++)s[o=a[p]]&&l.push(s[o][0]),s[o]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(t[i]=h[i]);for(d&&d(e);l.length;)l.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,a=1;a<n.length;a++)0!==s[n[a]]&&(i=!1);i&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},s={1:0},r=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,\"a\",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p=\"\";var a=window.webpackJsonp=window.webpackJsonp||[],h=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var d=h;r.push([\"iTwO\",2]),n()}({PGGC:function(t,e,n){},iTwO:function(t,e,n){\"use strict\";n.r(e);var i=n(\"ToYH\"),s=n(\"CcnG\"),r=n(\"ZYjt\");Object(s.lb)();var o={production:!0,showDevModule:!1,decorateModuleRef:function(t){return Object(r.f)(),t},ENV_PROVIDERS:[]},a=n(\"mrSG\"),h=n(\"gIcY\"),c=n(\"t/Na\"),d=n(\"wFw1\"),p=function(){function t(){this._state={}}return Object.defineProperty(t.prototype,\"state\",{get:function(){return this._state=this._clone(this._state)},set:function(t){throw new Error(\"do not mutate the `.state` directly\")},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=this.state;return e.hasOwnProperty(t)?e[t]:e},t.prototype.set=function(t,e){return this._state[t]=e},t.prototype._clone=function(t){return JSON.parse(JSON.stringify(t))},a.b([Object(s.y)()],t)}(),l=n(\"EVdn\"),u=(n(\"W1Kk\"),n(\"Womt\")),f=function(){function t(t){this.appState=t,this.renderer=new u.r,this.scene=null,this.camera=null,this.mesh=null,this.carMesh=null,this.textureFlag=!0,this.landWidth=701,this.landLength=5e3,this.skyWidth=1e4,this.skyLength=5e3,this.startWidth=4,this.startLength=2,this.finishWidth=4,this.finishLength=2,this.roadWidth=4,this.roadLength=5e3,this.landY=.4,this.scale=1,this.accelerationFlag=!1,this.brakeFlag=!1,this.maxSpeed=1,this.minSpeed=-1,this.currentSpeed=0,this.turnLeftFlag=!1,this.turnRightFlag=!1,this.currentAngle=0,this.collidableMeshArray=[],this.counter=0,this.startZPoz=-10,this.finishZPoz=-500,this.cameraIsSet=!1}return t.prototype.skyFactory=function(){var t=(new u.p).load(\"../assets/img/sky.png\"),e=new u.l(this.skyWidth,this.skyLength),n=new u.i({color:this.textureFlag?16777215:11184810,map:t}),i=new u.h(e,n);i.position.x=300,i.position.y=700+this.landY,i.position.z=-4e3,this.scene.add(i),this.sky=i},t.prototype.startFactory=function(){var t=this.startZPoz,e=(new u.p).load(\"../assets/img/logo.png\"),n=new u.l(this.startWidth,this.startLength),i=new u.i({color:this.textureFlag?16777215:11184810,map:e}),s=new u.h(n,i),r=new u.c(.1,.1,5,8,1,!1,0,2*Math.PI),o=new u.j({color:16777215,side:u.e}),a=new u.h(r,o);a.position.z=t,a.position.x=-2,a.position.y=1.5+this.landY,this.collidableMeshArray.push(a),this.scene.add(a);var h=new u.h(r,o);h.position.z=t,h.position.x=2,h.position.y=1.5+this.landY,this.collidableMeshArray.push(h),this.scene.add(h),s.position.y=3+this.landY,s.position.z=t,this.collidableMeshArray.push(s),this.scene.add(s),this.start=s},t.prototype.finishFactory=function(){var t=this.finishZPoz,e=(new u.p).load(\"../assets/img/final.png\"),n=new u.l(this.finishWidth,this.finishLength),i=new u.i({color:this.textureFlag?16777215:11184810,map:e}),s=new u.h(n,i),r=new u.c(.1,.1,5,8,1,!1,0,2*Math.PI),o=new u.j({color:16777215,side:u.e}),a=new u.h(r,o);a.position.z=t,a.position.x=-2,a.position.y=1.5+this.landY,this.collidableMeshArray.push(a),this.scene.add(a);var h=new u.h(r,o);h.position.z=t,h.position.x=2,h.position.y=1.5+this.landY,this.collidableMeshArray.push(h),this.scene.add(h),s.position.y=3+this.landY,s.position.z=t,this.collidableMeshArray.push(s),this.scene.add(s)},t.prototype.roadFactory=function(){this.roadLength=Math.abs(this.startZPoz-this.finishZPoz)+500;var t=(new u.p).load(\"../assets/img/road.jpg\");t.wrapS=t.wrapT=u.n,t.repeat.set(1,Math.round(.04*this.roadLength));var e=new u.l(this.roadWidth,this.roadLength),n=new u.i({color:this.textureFlag?16777215:11184810,map:t}),i=new u.h(e,n);this.scale=new u.q(-1,1,1),i.scale.copy(this.scale),i.rotation.x=-Math.PI/2,i.position.y=-.499+this.landY,i.position.z=this.startZPoz-Math.round(this.roadLength/2-50),this.scene.add(i),this.road=i},t.prototype.landFactory=function(){var t=(new u.p).load(\"../assets/img/grass.png\");t.wrapS=t.wrapT=u.n,t.repeat.set(100,100);var e=new u.l(this.landWidth,this.landLength),n=new u.i({color:this.textureFlag?16777215:11184810,map:t}),i=new u.h(e,n);i.rotation.x=-Math.PI/2,i.position.y=-.5+this.landY,this.scene.add(i),this.land=i},t.prototype.handleLoaded=function(t){if(t instanceof u.f){var e=t;e.computeVertexNormals();var n=(new u.p).load(\"../assets/3d/car3.jpg\"),i=(new u.p).load(\"../assets/3d/wheels.jpg\"),s=[new u.i({map:n,side:u.e}),new u.i({map:i,side:u.e})],r=new u.h(e,s);r.scale.copy(this.scale),this.scene.add(r),this.carMesh=r}},t.prototype.carFactory=function(){var t=this;this.scale=new u.q(-.005,.005,-.005),(new u.g).load(\"../assets/3d/NissanOBJ1.js\",function(e){t.handleLoaded(e)})},t.prototype.checkSpeed=function(){this.accelerationFlag?this.currentSpeed<=this.maxSpeed&&(this.currentSpeed+=this.currentSpeed<=0?.01:.001):this.brakeFlag?this.currentSpeed>=this.minSpeed&&(this.currentSpeed-=this.currentSpeed>=0?.01:.001):this.currentSpeed>=.001&&this.currentSpeed<=.001?this.currentSpeed=0:this.currentSpeed>0?this.currentSpeed-=.001:this.currentSpeed<0&&(this.currentSpeed+=.001),this.turnLeftFlag&&(this.currentAngle+=Math.round(100*Math.PI/180)/100*Math.abs(this.currentSpeed/this.maxSpeed)),this.turnRightFlag&&(this.currentAngle-=Math.round(100*Math.PI/180)/100*Math.abs(this.currentSpeed/this.maxSpeed)),this.currentSpeed>=this.minSpeed&&(this.carMesh.position.z>this.startZPoz+40?(this.currentSpeed=0,this.carMesh.translateZ(-.1)):this.carMesh.position.z<this.finishZPoz-40&&(this.currentSpeed=0,this.carMesh.translateZ(.1)),this.carMesh.position.x<-1.8?(this.currentAngle=0,this.carMesh.position.x=-1.75):this.carMesh.position.x>1.5&&(this.currentAngle=0,this.carMesh.position.x=1.45),this.carMesh.translateZ(-this.currentSpeed)),this.carMesh.rotation.y=this.currentAngle,this.camera.position.x=this.carMesh.position.x-.5,this.camera.position.z=this.carMesh.position.z+3.3333},t.prototype.detectCollision=function(t){if(this.counter<10)for(var e=0;e<t.geometry.vertices.length;e++){var n=t.geometry.vertices[e].clone().applyMatrix4(t.matrix).sub(t.position);new u.m(t.position.clone(),n.clone().normalize()).intersectObjects(this.collidableMeshArray).length>0&&n.length()}},t.prototype.ngOnInit=function(){var t=this;this.scene=new u.o,this.camera=new u.k(45,(window.innerWidth-5)/(window.innerHeight-5),1,1e4),this.camera.position.x=-.5,this.camera.position.y=0,this.camera.position.z=3.3333,this.camera.lookAt(new u.q(0,0,0)),this.camera.position.y=1;var e=new u.d(16777215);e.position.set(0,1,1).normalize(),this.scene.add(e);var n=new u.a(3355443);this.scene.add(n);var i=new u.j({map:(new u.p).load(\"../assets/img/rubics1.jpg\")}),s=new u.j({map:(new u.p).load(\"../assets/img/rubics1.jpg\")}),r=new u.j({map:(new u.p).load(\"../assets/img/rubics1.jpg\")}),o=new u.j({map:(new u.p).load(\"../assets/img/rubics1.jpg\")}),a=new u.j({map:(new u.p).load(\"../assets/img/rubics1.jpg\")}),h=new u.j({map:(new u.p).load(\"../assets/img/rubics1.jpg\")});this.materials=[i,s,r,o,a,h];var c=new u.b(100,100,100);this.mesh=new u.h(c,this.materials),this.skyFactory(),this.landFactory(),this.roadFactory(),this.startFactory(),this.finishFactory(),this.carFactory(),l(window).on(\"resize\",function(){t.camera.aspect=(window.innerWidth-5)/(window.innerHeight-5),t.camera.updateProjectionMatrix(),t.renderer.setSize(window.innerWidth-5,window.innerHeight-5)}),l(document).on(\"keydown\",function(e){37===e.keyCode&&(t.turnLeftFlag=!0),39===e.keyCode&&(t.turnRightFlag=!0),38===e.keyCode&&(t.accelerationFlag=!0),40===e.keyCode&&(t.brakeFlag=!0)}),l(document).on(\"keyup\",function(e){37===e.keyCode&&(t.turnLeftFlag=!1),39===e.keyCode&&(t.turnRightFlag=!1),38===e.keyCode&&(t.accelerationFlag=!1),40===e.keyCode&&(t.brakeFlag=!1)})},t.prototype.ngAfterViewInit=function(){this.renderer.setSize(window.innerWidth-5,window.innerHeight-5),this.renderer.domElement.style.display=\"block\",this.renderer.domElement.style.margin=\"auto\",this.rendererContainer.nativeElement.appendChild(this.renderer.domElement),this.animate()},t.prototype.animate=function(){var t=this;window.requestAnimationFrame(function(){return t.animate()}),this.carMesh&&(this.checkSpeed(),this.detectCollision(this.carMesh)),this.renderer.render(this.scene,this.camera)},a.b([Object(s.fb)(\"rendererContainer\"),a.d(\"design:type\",s.t)],t.prototype,\"rendererContainer\",void 0),a.b([Object(s.m)({selector:\"app\",encapsulation:s.hb.None,styles:[n(\"ynWL\"),n(\"8jWO\")],template:n(\"nH/3\"),providers:[]}),a.d(\"design:paramtypes\",[p])],t)}(),g=n(\"F/XL\"),y=[function(){function t(){}return t.prototype.resolve=function(t,e){return Object(g.a)({res:\"I am data\"})},a.b([Object(s.y)()],t)}()],w=(n(\"yLV6\"),n(\"SMsm\")),m=n(\"UodH\"),b=n(\"Z+uX\"),v=n(\"mVsa\"),M=n(\"Nsh5\"),S=n(\"uGex\"),j=n(\"b716\"),x=n(\"kWGw\"),F=n(\"LC5p\"),O=(n(\"PGGC\"),n(\"il4D\"),y.concat([p])),k=function(){function t(){}return a.b([Object(s.G)({bootstrap:[f],declarations:[f],imports:[r.a,d.b,h.b,c.b,w.a,m.a,b.a,v.a,M.a,S.a,j.a,x.a,F.a],providers:[o.ENV_PROVIDERS,O]})],t)}();function P(){return Object(i.a)().bootstrapModule(k).then(o.decorateModuleRef).catch(function(t){return console.error(t)})}switch(n.d(e,\"main\",function(){return P}),document.readyState){case\"loading\":document.addEventListener(\"DOMContentLoaded\",function t(){document.removeEventListener(\"DOMContentLoaded\",t,!1),P()},!1);break;case\"interactive\":case\"complete\":default:P()}},il4D:function(t,e,n){},mpQR:function(t,e,n){(t.exports=n(\"I1BE\")(!1)).push([t.i,\"body {\\n  margin: 0;\\n  padding: 0; }\\n\\ncanvas {\\n  width: 100%;\\n  height: 100%; }\\n\\n#mainEl {\\n  width: 100%;\\n  height: 100%; }\\n\",\"\"])},\"nH/3\":function(t,e){t.exports=\"\\x3c!-- <div>DevChallenge 1101</div> --\\x3e\\r\\n<div id='mainEl' #rendererContainer></div>\"},ynWL:function(t,e,n){var i=n(\"mpQR\");t.exports=\"string\"==typeof i?i:i.toString()},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error(\"Cannot find module '\"+t+\"'\");throw e.code=\"MODULE_NOT_FOUND\",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=\"zn8P\"}});","extractedComments":[]}